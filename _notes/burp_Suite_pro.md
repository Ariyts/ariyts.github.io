---
# Заголовок, который увидят пользователи
title: "Burp Suite: Введение и настройка"

# Короткое описание для списка заметок. Очень важно!
excerpt: "Настраиваем Burp Suite для перехвата трафика, устанавливаем сертификат в браузер и знакомимся с основными модулями."

# Теги для поиска и фильтрации
tags:
  - burp suite
  - web security
  - proxy

# Категория для группировки (может быть только одна)
categories:
  - Burp Suite
---

Протокол "Full Coverage" для Burp Suite Pro
Фаза 0: Подготовка и Конфигурация
Это фундамент. Пропустишь — вся дальнейшая работа будет неполной.
1.	Создание проекта: Всегда создавай отдельный проект для цели. Сохраняй его на диск.
2.	Настройка Scope (Области): 
o	Перейди в Target -> Scope.
o	Добавь целевой домен (https://example.com) в Include in scope.
o	Включи Proxy -> Options -> Intercept requests based on... -> "Is in target scope". Это отсеет мусор.
3.	Установка BApp'ов (Расширений): Это твой арсенал. Без него ты воюешь голыми руками. 
o	Extender -> BApp Store. Установи эти расширения обязательно: 
	Logger++: Улучшенный логгер всех запросов.
	Turbo Intruder: Высокоскоростной, гибкий Intruder для сложных атак.
	Autorize: Автоматический поиск нарушений контроля доступа (IDOR/Broken Access Control). Незаменим.
	Param Miner: Поиск скрытых, недокументированных параметров. Часто находит SSRF, кэш-пойзонинг.
	Active Scan++: Дополнительные проверки для Active Scanner.
	Reflected Parameters: Показывает все параметры, значения которых отражаются в ответе. Идеально для поиска XSS.
	Upload Scanner: Автоматизирует тесты уязвимостей загрузки файлов.
	Retire.js: Находит уязвимые JavaScript-библиотеки.
4.	Настройка сканера: 
o	Перейди в Scanner -> Scan configurations -> New.
o	Создай новую конфигурацию. В Auditing -> Issues Reported выбери "All issues". В Crawl Optimization и Audit Optimization установи "Thorough" (Тщательно). Это будет медленно, но максимально полно.
________________________________________
Фаза 1: Разведка и Картирование Приложения (Mapping)
Цель — понять структуру приложения и собрать как можно больше эндпоинтов.
1.	Пассивное картирование: 
o	Настрой браузер на работу через прокси Burp (127.0.0.1:8080).
o	Вручную пройдись по всему сайту. Кликай на каждую кнопку, ссылку, отправляй все формы (с тестовыми данными). Зайди в личный кабинет под разными ролями (если есть: user, admin).
o	Цель — максимально наполнить Target -> Site map. Автоматический паук никогда не заменит ручной обход.
2.	Активное картирование (Spidering): 
o	В Site map кликни правой кнопкой мыши по домену -> Scan -> Open scan launcher.
o	Выбери Crawl (сканирование) и свою "Thorough" конфигурацию. Запусти. Burp попытается найти то, что ты мог пропустить.
3.	Обнаружение скрытого контента: 
o	В Site map кликни правой кнопкой по домену -> Engagement tools -> Discover content.
o	Используй качественные словари (например, из проекта SecLists на GitHub) для перебора файлов и директорий. Ищи админки, старые файлы, бэкапы (.bak, .old), .git, .env.
________________________________________
Фаза 2: Автоматическое Сканирование (Широкий охват)
Теперь, когда у нас есть полная карта сайта, запускаем тяжелую артиллерию.
1.	В Target -> Site map выбери весь хост (или конкретные ветки).
2.	Правой кнопкой -> Scan.
3.	Выбери Crawl and Audit (сканирование и аудит).
4.	Выбери свою "Thorough" конфигурацию.
5.	Запусти сканирование. Иди пить кофе, это надолго.
6.	Следи за результатами в Scanner -> Issue activity.
________________________________________
Фаза 3: Ручное Тестирование (Глубокий анализ)
Автоматика — это хорошо, но она находит только типовые уязвимости. Самые сочные баги ищутся руками. Используй этот чек-лист, отправляя интересные запросы в Repeater.
Инструменты:
•	Repeater (Ctrl+R): Твой главный инструмент. Отправляй запросы сюда для ручных модификаций.
•	Intruder (Ctrl+I): Для фаззинга, перебора, брутфорса.
•	Decoder (Ctrl+D): Для работы с кодировками (Base64, URL, etc.).
•	Comparer (Ctrl+M): Для сравнения двух ответов или запросов.
Чек-лист по классам уязвимостей:
•	Аутентификация и сессии:
o	 Брутфорс логина/пароля: Отправь запрос на логин в Intruder.
o	 Слабая политика паролей: Проверь требования при регистрации/смене пароля.
o	 Уязвимость восстановления пароля: Можно ли перехватить токен? Есть ли лимит на попытки ввода кода?
o	 Предсказуемость токенов сессии: Отправь запрос в Sequencer для анализа энтропии.
o	 Фиксация сессии: Можно ли подсунуть пользователю свой session_id?
o	 Проверка выхода (Logout): Действительно ли сессия инвалидируется на сервере после выхода?
•	Контроль доступа (IDOR, эскалация привилегий):
o	 Запусти Autorize! Настрой его: скопируй куки низкопривилегированного пользователя, затем из-под админа/другого юзера снова пройдись по всему сайту. Autorize покажет, куда удалось получить доступ без прав.
o	 IDOR (Insecure Direct Object References): Везде, где видишь ID в URL или теле запроса (/api/users/123, {"order_id": 456}), подставляй чужие ID. Отправляй в Repeater и меняй цифры.
o	 Вертикальная эскалация: Зайди под обычным пользователем и попробуй напрямую обратиться к админским эндпоинтам (/admin, /api/admin/dashboard).
o	 Горизонтальная эскалация: Попробуй выполнить действия от имени другого пользователя твоего же уровня прав (например, посмотреть чужой профиль, который должен быть приватным).
•	Инъекции:
o	 SQL Injection: Во все параметры, которые уходят на бэкенд, вставляй кавычки ('), двойные кавычки ("), комментарии (--, #). Используй SQLMap (можно интегрировать с Burp).
o	 Cross-Site Scripting (XSS): 
	Используй Reflected Parameters для быстрого поиска точек.
	Во все поля ввода вставляй базовые векторы: <script>alert(1)</script>, "><svg onload=alert(1)>.
	Проверяй заголовки, параметры URL, тело POST-запросов.
o	 Command Injection: В полях, которые могут использоваться как аргументы системных команд (например, filename=myfile.txt), попробуй добавить | whoami, && ls -la.
o	 Server-Side Template Injection (SSTI): В полях, где есть шаблонизация (например, ?name=John), используй полиглоты типа ${7*7}, {{7*7}}, <%= 7*7 %>. Если видишь 49 в ответе — это оно.
o	 XXE (XML External Entity): Если видишь Content-Type: application/xml, пробуй XXE-пейлоады для чтения локальных файлов.
•	Логические уязвимости:
o	Это самая сложная часть, требующая понимания бизнес-процессов. Автоматика здесь бессильна.
o	 Можно ли добавить товар в корзину с отрицательной ценой?
o	 Можно ли пройти процесс заказа, не дойдя до этапа оплаты?
o	 Можно ли использовать промокод несколько раз?
o	 Можно ли проголосовать/оценить что-то дважды, манипулируя запросами?
•	Загрузка файлов:
o	 Запусти Upload Scanner.
o	 Попробуй загрузить веб-шелл (.php, .jsp, .aspx).
o	 Попробуй обойти проверку типа файла: shell.php.jpg, shell.jpg с Content-Type: image/jpeg, но содержимым PHP-скрипта.
o	 Попробуй обойти проверку "магических байтов" файла.
•	SSRF (Server-Side Request Forgery):
o	Найди параметры, которые принимают URL (?image_url=..., ?redirect_to=...).
o	Подставь адрес Burp Collaborator (Scanner -> Burp Collaborator client). Если придет запрос на Collaborator — уязвимость есть.
o	Попробуй обратиться к внутренним ресурсам: http://127.0.0.1, http://localhost/server-status.
________________________________________
О "Скрипте" для автоматизации
Прямого "скрипта", который бы выполнил все эти ручные шаги, не существует. Однако ты можешь автоматизировать рутинные последовательности с помощью Макросов.
Пример: Автоматическое сканирование раздела, требующего аутентификации.
1.	Project options -> Sessions -> Macros -> Add.
2.	Burp покажет лог твоих запросов. Выбери последовательность: 
o	GET /login (получение страницы с формой)
o	POST /login (отправка логина и пароля)
3.	Запиши макрос.
4.	Теперь в Project options -> Sessions -> Session Handling Rules -> Add создай правило.
5.	На вкладке Scope выбери целевые инструменты (Scanner, Intruder) и URL.
6.	На вкладке Rule Actions выбери "Run a macro" и укажи свой макрос входа.
7.	Теперь, когда сканер наткнется на страницу, требующую логина, он автоматически выполнит макрос и продолжит работу с валидной сессией.
________________________________________
Итоговый рабочий процесс опытного пентестера:
1.	Настройка: Создать проект, настроить Scope, установить BApp'ы.
2.	Картирование: Руками обойти весь сайт, затем добить автоматическим спайдером и поиском контента.
3.	Авто-скан: Запустить полный Crawl and Audit с самой тщательной конфигурацией.
4.	Анализ: Пока идет скан, уже начать ручной анализ по чек-листу, уделяя особое внимание контролю доступа (Autorize) и бизнес-логике.
5.	Верификация: После завершения скана никогда не доверять слепо результатам. Каждый найденный баг проверить вручную через Repeater.
6.	Глубокое погружение: Используя данные скана и ручного обхода, проводить целенаправленные атаки (раскручивать SQLi, XSS, IDOR).

